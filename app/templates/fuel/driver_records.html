<style>
  <head>
            .btn {
            background-color: #278ce4ff;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            color: white;
            text-decoration: none;
        }

        .btn:hover {
            background-color: #71b6ebff;
        }
  </head>
</style>
{% extends 'layout.html' %}
{% block content %}
<div class="max-w-7xl mx-auto py-8 px-4">
  <h2 class="text-2xl font-bold text-gray-800 mb-6"><i class="fas fa-history"></i> My Fuel Request Records</h2> 

  <!-- Search & Filter Form -->
  <form method="GET" action="{{ url_for('driver.driver_records') }}" class="flex flex-col md:flex-row gap-4 mb-6">
    <input type="text" name="search_reg" placeholder="Search by vehicle registration..." value="{{ request.args.get('search_reg', '') }}"
           class="w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />

    <input type="date" name="search_date" value="{{ request.args.get('search_date', '') }}"
           class="w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />

    <button type="submit"
            class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-2 rounded-md">
      Search
    </button>

    <a href="{{ url_for('fuelrequest.dashboard') }}" class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-2 rounded-md">Back</a>
  </form>

  <!-- Results Table -->
  {% if records %}
  <div class="overflow-x-auto">
    <table class="min-w-full table-auto bg-white shadow-md rounded-md">
      <thead class="bg-blue-600 text-white">
        <tr>
          <th class="px-4 py-2 text-left">Vehicle</th>
          <th class="px-4 py-2 text-left">Card No</th>
          <th class="px-4 py-2 text-left">Odometer</th>
          <th class="px-4 py-2 text-left">Requested</th>
          <th class="px-4 py-2 text-left">Status</th>
          <th class="px-4 py-2 text-left">Date</th>
        </tr>
      </thead>
      <tbody>
        {% for record in records %}
        <tr class="border-b hover:bg-gray-50">
          <td class="px-4 py-2">{{ record.vehicle.registration_no }}</td>
          <td class="px-4 py-2">{{ record.card_no }}</td>
          <td class="px-4 py-2">{{ record.odometer_reading }}</td>
          <td class="px-4 py-2">{{ record.amount_requested }} Ksh</td>
          <td class="px-4 py-2">
            {% if record.status == 'Submitted' %}
              <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-xs">Submitted</span>
            {% elif record.status == 'Approved' %}
              <span class="bg-yellow-500 text-white px-3 py-1 rounded-full text-xs">Approved</span>
            {% elif record.status == 'Loaded' %}
              <span class="bg-green-600 text-white px-3 py-1 rounded-full text-xs">Loaded</span>
            {% elif record.status == 'Rejected' %}
              <span class="bg-red-500 text-white px-3 py-1 rounded-full text-xs">Rejected</span>
            {% else %}
              <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">{{ record.status }}</span>
            {% endif %}
          </td>
          <td class="px-4 py-2">{{ record.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <div class="text-gray-500 mt-8">No records found matching your filters.</div>
  {% endif %}
  
</div>
{% endblock %}
